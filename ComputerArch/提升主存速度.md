# 提升主存速度

#### 双端口RAM

对于多CPU系统，可以支持并行访问存储体

支持多CPU访问同一内存，但是这样就需要每个CPU都有独立的数据总线，地址总线，控制线等。

![image-20230504112337586](C:\Users\papa\AppData\Roaming\Typora\typora-user-images\image-20230504112337586.png)

当需要对同一地址空间同时写入或者一个读一个写时，会置busy，让一个先等待。

![image-20230530203130175](C:\Users\papa\AppData\Roaming\Typora\typora-user-images\image-20230530203130175.png)

#### 多体并行存储器

多体就是多个存储体（多根内存条）

分为高位编址和低位编址，

高位编址连续的空间是在同一条内存上的，但低位编址连续空间是在相邻的内存条上。

考虑到**存取周期**==存取时间+恢复时间，连续访问同一内存条需要不断等待恢复，但是访问不同内存条就可以基本无需等待，大大提高CPU工作效率。

每隔r的存取时间就向下一个存储体开始存取数据

多体交叉存储器中每个体的数据位数就与相连的数据总线位数相同，这与80486的位扩展不太相同，那个是每个体8bit，4个一共32bit，这个可以理解为每个都是32bit，交叉着工作。

多体交叉的流水线方式就是在存取一个存储体的时候就可以去启动别的模块的读写（发出信号让他准备）

![image-20230504112650899](C:\Users\papa\AppData\Roaming\Typora\typora-user-images\image-20230504112650899.png)



体模块的数量m>=T/r，这样可以保证至少会有一个体在连续访问完一轮后是恢复完毕的。  

![image-20230504113019458](C:\Users\papa\AppData\Roaming\Typora\typora-user-images\image-20230504113019458.png)



对于多体存储器，每个体要保证容量相同（为了保证防止出现前面是多通道，到后来小的容量不够了，只能去访问大的又变回单通道了），相同频率（为了保证存取速度一致T，否则会将就低频的，拉低性能）。

单体多字是只通过一个体，但是每个存储单元变成了多个字，一次读写是以多个字为单位的。

![image-20230504121527182](C:\Users\papa\AppData\Roaming\Typora\typora-user-images\image-20230504121527182.png)



# 相联存储器

可以根据内容来查找，不仅可以按地址查找。

主要是通过数字比较电路然后选中某一个存储单元读出来.

![image-20230530205854037](C:\Users\papa\AppData\Roaming\Typora\typora-user-images\image-20230530205854037.png)

相联存储器不能做的容量太大,一般用于Cache的目录表和虚拟存储的TLB快表.

![image-20230530210157903](C:\Users\papa\AppData\Roaming\Typora\typora-user-images\image-20230530210157903.png)