# 指令周期

指令周期：包含根据PC的值从主存中取出指令，再对指令进行译码，最后根据译码得到的许多微操作信号来执行指令。

一个指令周期中包含了若干个机器周期，不同的指令可能包含的机器周期数目不同，然后每一个机器周期是有若干个节拍（时钟周期）它是最基本的CPU周期单位，组成的。

### 1.取指周期

首先根据PC中的值，将PC的值传到MAR中,

MAR通过CPU外的地址总线将要访问的主存地址传到存储单元中，但同时CU控制单元通过控制总线向存储单元发送读/写的请求，存储单元将指令通过数据总线传送到MDR，MDR再把当前指令通过CPU内部总线传送到IR中。

由此完成了一次取指的操作。

![image-20230523213043738](C:\Users\papa\AppData\Roaming\Typora\typora-user-images\image-20230523213043738.png)

### 2.间址周期

根据IR或者MDR中现在指令的地址码，他可能是形式地址，要转化成有效地址，假设是间接寻址，就将这个地址码送到MAR中去，然后CU再次通过控制总线向存储单元发出读指令，然后将读出的数据通过数据总线放到MDR中去，MDR可以把得到的有效地址再送到IR存放的指令中重新拼接。

![image-20230523213130482](C:\Users\papa\AppData\Roaming\Typora\typora-user-images\image-20230523213130482.png)

### 3.执行周期

不同指令执行的事件也不相同，就是根据操作码和根据前面获得的有效地址得到的操作数来进行一些操作。

### 4.中断周期

要离开当前运行的程序去执行中断处理程序，要保存断点，也就是把当前的PC的值保存在栈顶中，就先将SP指针-1，然后CU通过控制总线向存储器发出写信号，然后将SP-1传入MAR中，再将PC的值通过MDR再通过数据总线写入SP-1对应的主存地址中去。![image-20230523213215197](C:\Users\papa\AppData\Roaming\Typora\typora-user-images\image-20230523213215197.png)